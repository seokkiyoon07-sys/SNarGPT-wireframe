<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SNarGPT â€¢ MVP Highâ€‘Fidelity Wireframe</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
  <style>
    /* Google Material Design 3 Color System */
    :root {
      /* Primary Colors */
      --md-primary: #6750A4;
      --md-on-primary: #FFFFFF;
      --md-primary-container: #EADDFF;
      --md-on-primary-container: #21005D;
      
      /* Secondary Colors */
      --md-secondary: #625B71;
      --md-on-secondary: #FFFFFF;
      --md-secondary-container: #E8DEF8;
      --md-on-secondary-container: #1D192B;
      
      /* Tertiary Colors */
      --md-tertiary: #7D5260;
      --md-on-tertiary: #FFFFFF;
      --md-tertiary-container: #FFD8E4;
      --md-on-tertiary-container: #31111D;
      
      /* Error Colors */
      --md-error: #BA1A1A;
      --md-on-error: #FFFFFF;
      --md-error-container: #FFDAD6;
      --md-on-error-container: #410002;
      
      /* Surface Colors */
      --md-surface: #FEF7FF;
      --md-on-surface: #1C1B1F;
      --md-surface-variant: #E7E0EC;
      --md-on-surface-variant: #49454F;
      --md-surface-container: #F3EDF7;
      --md-surface-container-high: #ECE6F0;
      --md-surface-container-highest: #E6E0E9;
      
      /* Outline Colors */
      --md-outline: #79747E;
      --md-outline-variant: #CAC4D0;
      
      /* Background Colors */
      --md-background: #FEF7FF;
      --md-on-background: #1C1B1F;
      
      /* Shadow */
      --md-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
      --md-shadow-elevated: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
      --md-shadow-high: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);
    }
    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      background: var(--md-background);
      color: var(--md-on-background);
      font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
      line-height: 1.5;
    }

    a {
      color: var(--md-primary);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }
    .app {
      display: grid;
      grid-template-columns: 280px 1fr;
      min-height: 100vh;
    }

    .sidebar {
      background: var(--md-surface);
      border-right: 1px solid var(--md-outline-variant);
      padding: 24px;
      position: sticky;
      top: 0;
      height: 100vh;
      box-shadow: var(--md-shadow);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 500;
      font-size: 20px;
      letter-spacing: 0.15px;
      margin-bottom: 32px;
    }

    .logo-badge {
      width: 40px;
      height: 40px;
      border-radius: 20px;
      background: var(--md-primary);
      color: var(--md-on-primary);
      display: grid;
      place-items: center;
      font-weight: 500;
      font-size: 18px;
    }

    .side-links {
      display: grid;
      gap: 4px;
    }

    .side-links a {
      padding: 12px 16px;
      border-radius: 20px;
      color: var(--md-on-surface);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .side-links a:hover {
      background: var(--md-surface-container);
    }

    .kbd {
      font-family: 'Roboto Mono', monospace;
      font-size: 11px;
      font-weight: 500;
      background: var(--md-surface-container);
      border: 1px solid var(--md-outline-variant);
      padding: 4px 8px;
      border-radius: 4px;
      color: var(--md-on-surface-variant);
    }

    .main {
      padding: 32px;
      background: var(--md-background);
    }

    .topbar {
      display: flex;
      align-items: center;
      gap: 16px;
      justify-content: space-between;
      margin-bottom: 24px;
    }

    .top-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .pill {
      padding: 8px 16px;
      border-radius: 16px;
      background: var(--md-primary-container);
      color: var(--md-on-primary-container);
      font-size: 12px;
      font-weight: 500;
    }

    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 20px;
      background: var(--md-primary);
      border: none;
    }

    .grid {
      display: grid;
      gap: 16px;
    }

    .grid.cols-2 {
      grid-template-columns: 1fr 1fr;
    }

    .grid.cols-3 {
      grid-template-columns: repeat(3, 1fr);
    }

    .panel {
      background: var(--md-surface);
      border: 1px solid var(--md-outline-variant);
      border-radius: 12px;
      padding: 24px;
      box-shadow: var(--md-shadow);
      transition: box-shadow 0.2s ease;
    }

    .panel:hover {
      box-shadow: var(--md-shadow-elevated);
    }

    .panel h3 {
      margin: 0 0 16px 0;
      font-size: 22px;
      font-weight: 400;
      color: var(--md-on-surface);
    }

    .muted {
      color: var(--md-on-surface-variant);
      font-size: 14px;
    }

    .tag {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      border: 1px solid var(--md-outline-variant);
      border-radius: 16px;
      background: var(--md-surface-container);
      font-size: 12px;
      font-weight: 500;
      color: var(--md-on-surface);
      transition: all 0.2s ease;
    }

    .tag:hover {
      background: var(--md-surface-container-high);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      border-radius: 20px;
      border: 1px solid var(--md-outline);
      background: var(--md-surface);
      color: var(--md-on-surface);
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      text-decoration: none;
      transition: all 0.2s ease;
      box-shadow: var(--md-shadow);
    }

    .btn:hover {
      background: var(--md-surface-container);
      box-shadow: var(--md-shadow-elevated);
    }

    .btn.primary {
      background: var(--md-primary);
      color: var(--md-on-primary);
      border: none;
      font-weight: 500;
    }

    .btn.primary:hover {
      background: var(--md-primary);
      opacity: 0.9;
    }

    .btn.ghost {
      background: transparent;
      border: none;
      box-shadow: none;
    }

    .btn.ghost:hover {
      background: var(--md-surface-container);
    }

    .btn.small {
      padding: 8px 16px;
      font-size: 12px;
    }

    .input, textarea, select {
      width: 100%;
      background: var(--md-surface);
      border: 1px solid var(--md-outline);
      border-radius: 4px;
      color: var(--md-on-surface);
      padding: 16px;
      font-size: 16px;
      font-family: inherit;
      transition: all 0.2s ease;
    }

    .input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: var(--md-primary);
      box-shadow: 0 0 0 2px var(--md-primary-container);
    }

    textarea {
      min-height: 120px;
      resize: vertical;
    }

    .toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 16px 0;
    }

    .chip {
      padding: 8px 16px;
      border-radius: 16px;
      background: var(--md-surface-container);
      border: 1px solid var(--md-outline-variant);
      font-size: 12px;
      font-weight: 500;
      color: var(--md-on-surface-variant);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .chip:hover {
      background: var(--md-surface-container-high);
    }

    .seg {
      display: inline-flex;
      background: var(--md-surface-container);
      border: 1px solid var(--md-outline-variant);
      border-radius: 20px;
      overflow: hidden;
    }

    .seg button {
      padding: 12px 20px;
      border: none;
      background: transparent;
      color: var(--md-on-surface-variant);
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .seg button.active {
      background: var(--md-primary);
      color: var(--md-on-primary);
    }

    .answer-step {
      padding: 16px;
      border-left: 4px solid var(--md-primary);
      background: var(--md-primary-container);
      border-radius: 8px;
      margin: 16px 0;
    }

    .math {
      font-family: 'Roboto Mono', monospace;
      background: var(--md-surface-container);
      border: 1px solid var(--md-outline-variant);
      border-radius: 8px;
      padding: 16px;
      overflow: auto;
      font-size: 14px;
    }

    .two-col {
      display: grid;
      grid-template-columns: 1.2fr 0.8fr;
      gap: 24px;
    }

    .table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0 8px;
    }

    .table th {
      color: var(--md-on-surface-variant);
      text-align: left;
      font-weight: 500;
      font-size: 12px;
      padding: 0 16px;
    }

    .row {
      display: grid;
      grid-template-columns: 140px 1fr 120px 120px;
      gap: 16px;
      align-items: center;
      background: var(--md-surface);
      border: 1px solid var(--md-outline-variant);
      border-radius: 12px;
      padding: 16px;
      box-shadow: var(--md-shadow);
    }

    .pricing {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
    }

    .plan {
      background: var(--md-surface);
      border: 1px solid var(--md-outline-variant);
      border-radius: 16px;
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      box-shadow: var(--md-shadow);
      transition: all 0.2s ease;
    }

    .plan:hover {
      box-shadow: var(--md-shadow-elevated);
    }

    .plan.pop {
      border: 2px solid var(--md-primary);
      box-shadow: var(--md-shadow-high);
    }

    .price {
      font-size: 32px;
      font-weight: 400;
      color: var(--md-on-surface);
    }

    .strike {
      opacity: 0.6;
      text-decoration: line-through;
    }

    .notice {
      display: flex;
      gap: 16px;
      align-items: flex-start;
      border: 1px solid var(--md-outline-variant);
      padding: 16px;
      border-radius: 12px;
      background: var(--md-surface-container);
    }

    .badge {
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 500;
      background: var(--md-primary-container);
      color: var(--md-on-primary-container);
    }

    .skeleton {
      height: 16px;
      background: var(--md-surface-container);
      border-radius: 8px;
      opacity: 0.6;
      animation: skeleton-loading 1.5s ease-in-out infinite;
    }

    @keyframes skeleton-loading {
      0% { opacity: 0.6; }
      50% { opacity: 0.3; }
      100% { opacity: 0.6; }
    }

    .divider {
      height: 1px;
      background: var(--md-outline-variant);
      margin: 24px 0;
    }

    .section-title {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 8px 0 16px;
    }

    .nav-tabs {
      display: flex;
      gap: 8px;
      margin: 16px 0;
    }

    .nav-tabs a {
      padding: 12px 20px;
      border-radius: 20px;
      border: 1px solid var(--md-outline);
      text-decoration: none;
      color: var(--md-on-surface-variant);
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .nav-tabs a.active {
      background: var(--md-primary);
      color: var(--md-on-primary);
      border: none;
    }

    .sticky-cta {
      position: sticky;
      bottom: 24px;
      display: flex;
      gap: 12px;
      justify-content: flex-end;
    }

    /* SPA Page Management */
    .page {
      display: none;
      animation: fadeIn 0.3s ease-in-out;
    }

    .page.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .side-links a.active {
      background: var(--md-primary-container);
      color: var(--md-on-primary-container);
    }

    .side-links a:hover {
      background: var(--md-surface-container);
    }

    /* Chat Interface Styles */
    .chat-container {
      display: flex;
      flex-direction: column;
      height: calc(100vh - 64px);
      max-height: calc(100vh - 64px);
    }

    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .message {
      display: flex;
      gap: 12px;
      max-width: 100%;
    }

    .message.user {
      flex-direction: row-reverse;
    }

    .message.assistant {
      flex-direction: row;
    }

    .message-avatar {
      width: 32px;
      height: 32px;
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 500;
      font-size: 14px;
      flex-shrink: 0;
    }

    .message.user .message-avatar {
      background: var(--md-primary);
      color: var(--md-on-primary);
    }

    .message.assistant .message-avatar {
      background: var(--md-secondary-container);
      color: var(--md-on-secondary-container);
    }

    .message-content {
      max-width: 70%;
      padding: 12px 16px;
      border-radius: 18px;
      word-wrap: break-word;
    }

    .message.user .message-content {
      background: var(--md-primary);
      color: var(--md-on-primary);
      border-bottom-right-radius: 4px;
    }

    .message.assistant .message-content {
      background: var(--md-surface-container);
      color: var(--md-on-surface);
      border-bottom-left-radius: 4px;
    }

    .message-time {
      font-size: 11px;
      color: var(--md-on-surface-variant);
      margin-top: 4px;
      text-align: right;
    }

    .message.assistant .message-time {
      text-align: left;
    }

    .chat-input-container {
      padding: 20px;
      background: var(--md-surface);
      border-top: 1px solid var(--md-outline-variant);
      position: sticky;
      bottom: 0;
    }

    .chat-input-form {
      display: flex;
      gap: 12px;
      align-items: flex-end;
    }

    .chat-input {
      flex: 1;
      min-height: 44px;
      max-height: 120px;
      resize: none;
      border-radius: 22px;
      padding: 12px 20px;
      border: 1px solid var(--md-outline);
      background: var(--md-surface-container);
      font-family: inherit;
      font-size: 14px;
      line-height: 1.4;
    }

    .chat-input:focus {
      outline: none;
      border-color: var(--md-primary);
      box-shadow: 0 0 0 2px var(--md-primary-container);
    }

    .chat-send-btn {
      width: 44px;
      height: 44px;
      border-radius: 22px;
      border: none;
      background: var(--md-primary);
      color: var(--md-on-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .chat-send-btn:hover {
      background: var(--md-primary);
      opacity: 0.9;
      transform: scale(1.05);
    }

    .chat-send-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .typing-indicator {
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--md-on-surface-variant);
      font-size: 14px;
      padding: 12px 16px;
    }

    .typing-dots {
      display: flex;
      gap: 4px;
    }

    .typing-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--md-on-surface-variant);
      animation: typing 1.4s infinite ease-in-out;
    }

    .typing-dot:nth-child(1) { animation-delay: -0.32s; }
    .typing-dot:nth-child(2) { animation-delay: -0.16s; }

    @keyframes typing {
      0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
      40% { transform: scale(1); opacity: 1; }
    }

    .math-block {
      background: var(--md-surface-container);
      border: 1px solid var(--md-outline-variant);
      border-radius: 8px;
      padding: 16px;
      margin: 8px 0;
      font-family: 'Roboto Mono', monospace;
      font-size: 14px;
      overflow-x: auto;
    }

    .step-indicator {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 8px 0;
      padding: 8px 12px;
      background: var(--md-primary-container);
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
    }

    /* Chat History Styles */
    .chat-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 16px;
    }

    .chat-item {
      padding: 16px;
      background: var(--md-surface);
      border: 1px solid var(--md-outline-variant);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: var(--md-shadow);
    }

    .chat-item:hover {
      background: var(--md-surface-container);
      box-shadow: var(--md-shadow-elevated);
      transform: translateY(-1px);
    }

    .chat-item-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 8px;
    }

    .chat-item-title {
      font-weight: 500;
      font-size: 16px;
      color: var(--md-on-surface);
      flex: 1;
      margin-right: 12px;
    }

    .chat-item-time {
      font-size: 12px;
      color: var(--md-on-surface-variant);
      white-space: nowrap;
    }

    .chat-item-preview {
      font-size: 14px;
      color: var(--md-on-surface-variant);
      margin-bottom: 12px;
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .chat-item-meta {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .chat-item-message-count {
      font-size: 12px;
      color: var(--md-on-surface-variant);
      margin-left: auto;
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--md-on-surface-variant);
    }

    .empty-state h3 {
      margin: 16px 0 8px 0;
      color: var(--md-on-surface);
    }

    .empty-state p {
      margin: 0 0 24px 0;
      font-size: 14px;
    }

    /* Clean Welcome Screen */
    .welcome-screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      min-height: 60vh;
      text-align: center;
      padding: 40px 20px;
    }

    .welcome-message {
      font-size: 18px;
      color: var(--md-on-surface-variant);
      margin-bottom: 40px;
      font-weight: 400;
    }

    .main-input-container {
      width: 100%;
      max-width: 600px;
      position: relative;
      margin-bottom: 20px;
    }

    .main-input-wrapper {
      position: relative;
      display: flex;
      align-items: center;
      background: var(--md-surface);
      border: 2px solid var(--md-outline-variant);
      border-radius: 24px;
      padding: 12px 16px;
      transition: all 0.2s ease;
      box-shadow: var(--md-shadow);
    }

    .main-input-wrapper:focus-within {
      border-color: var(--md-primary);
      box-shadow: 0 0 0 3px var(--md-primary-container);
    }

    .main-input {
      flex: 1;
      border: none;
      outline: none;
      background: transparent;
      font-size: 16px;
      color: var(--md-on-surface);
      padding: 8px 12px;
      font-family: inherit;
    }

    .main-input::placeholder {
      color: var(--md-on-surface-variant);
    }

    .input-actions {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .action-btn {
      width: 36px;
      height: 36px;
      border: none;
      background: transparent;
      border-radius: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
      color: var(--md-on-surface-variant);
    }

    .action-btn:hover {
      background: var(--md-surface-container);
      color: var(--md-on-surface);
    }

    .action-btn.primary {
      background: var(--md-primary);
      color: var(--md-on-primary);
    }

    .action-btn.primary:hover {
      background: var(--md-primary);
      opacity: 0.9;
    }

    .dropdown-menu {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--md-surface);
      border: 1px solid var(--md-outline-variant);
      border-radius: 12px;
      box-shadow: var(--md-shadow-high);
      z-index: 1000;
      margin-top: 8px;
      overflow: hidden;
      display: none;
    }

    .dropdown-menu.show {
      display: block;
    }

    .dropdown-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      cursor: pointer;
      transition: background 0.2s ease;
      font-size: 14px;
      color: var(--md-on-surface);
    }

    .dropdown-item:hover {
      background: var(--md-surface-container);
    }

    .dropdown-item-icon {
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }

    .dropdown-item-text {
      flex: 1;
    }

    .dropdown-item-badge {
      background: var(--md-error-container);
      color: var(--md-on-error-container);
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 11px;
      font-weight: 500;
    }

    .dropdown-item-badge.premium {
      background: linear-gradient(135deg, #FFD700, #FFA500);
      color: #000;
      font-weight: 600;
    }

    .premium-item {
      position: relative;
    }

    .premium-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background: linear-gradient(135deg, #FFD700, #FFA500);
      border-radius: 0 2px 2px 0;
    }

    .premium-item:hover {
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 165, 0, 0.1));
    }

    .quick-actions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 20px;
    }

    .quick-action-btn {
      padding: 8px 16px;
      background: var(--md-surface-container);
      border: 1px solid var(--md-outline-variant);
      border-radius: 20px;
      color: var(--md-on-surface);
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .quick-action-btn:hover {
      background: var(--md-primary-container);
      color: var(--md-on-primary-container);
      border-color: var(--md-primary);
    }

    /* Subject Selection Tabs */
    .subject-tabs {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin-top: 24px;
      flex-wrap: wrap;
    }

    .subject-tab {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 20px;
      background: var(--md-surface-container);
      border: 1px solid var(--md-outline-variant);
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 14px;
      font-weight: 500;
      color: var(--md-on-surface);
    }

    .subject-tab:hover {
      background: var(--md-surface-container-high);
      border-color: var(--md-outline);
    }

    .subject-tab.active {
      background: var(--md-primary);
      color: var(--md-on-primary);
      border-color: var(--md-primary);
    }

    .subject-icon {
      font-size: 16px;
    }

    .subject-name {
      font-weight: 500;
    }

    .subject-notice {
      text-align: center;
      font-size: 12px;
      color: var(--md-on-surface-variant);
      margin-top: 12px;
      font-style: italic;
    }

    /* Exploration Submenu */
    .exploration-submenu {
      background: var(--md-surface);
      border: 1px solid var(--md-outline-variant);
      border-radius: 16px;
      box-shadow: var(--md-shadow-elevated);
      margin-top: 16px;
      padding: 20px;
      max-width: 600px;
      width: 100%;
    }

    .submenu-section {
      margin-bottom: 20px;
    }

    .submenu-section:last-child {
      margin-bottom: 0;
    }

    .submenu-title {
      font-size: 16px;
      font-weight: 600;
      color: var(--md-on-surface);
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--md-outline-variant);
    }

    .submenu-items {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 8px;
    }

    .submenu-item {
      padding: 8px 12px;
      background: var(--md-surface-container);
      border: 1px solid var(--md-outline-variant);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 13px;
      text-align: center;
      color: var(--md-on-surface);
    }

    .submenu-item:hover {
      background: var(--md-primary-container);
      color: var(--md-on-primary-container);
      border-color: var(--md-primary);
    }

    .submenu-item.selected {
      background: var(--md-primary);
      color: var(--md-on-primary);
      border-color: var(--md-primary);
    }

    @media (max-width: 1024px) {
      .app {
        grid-template-columns: 1fr;
      }
      .sidebar {
        position: relative;
        height: auto;
      }
      .grid.cols-2, .grid.cols-3, .two-col, .pricing {
        grid-template-columns: 1fr;
      }
      .row {
        grid-template-columns: 120px 1fr 100px 100px;
      }
    }

    /* Print styles */
    @media print {
      body {
        background: #fff;
        color: #000;
      }
      .sidebar {
        display: none;
      }
      .panel, .plan, .row {
        break-inside: avoid;
      }
      .main {
        padding: 0;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- SIDEBAR NAV -->
    <aside class="sidebar">
      <div class="logo"><div class="logo-badge">SN</div> SNarGPT MVP</div>
      <div class="side-links">
        <a href="#overview">ğŸ ê°œìš”Â·í”Œë¡œìš°</a>
        <a href="#auth">ğŸ” ì¸ì¦/íšŒì›</a>
        <a href="#new-question">âœï¸ ìƒˆ ì§ˆë¬¸í•˜ê¸°</a>
        <a href="#history">ğŸ—‚ ì±„íŒ… íˆìŠ¤í† ë¦¬</a>
        <a href="#pricing">ğŸ’³ ê²°ì œ/êµ¬ë…</a>
        <a href="#settings">âš™ï¸ ì„¤ì •</a>
        <a href="#support">ğŸ›Ÿ ê³ ê°ì§€ì›</a>
      </div>
      <div style="margin-top:20px" class="notice">
        <div>ğŸ“Œ</div>
        <div>
          <strong>MVP ë²”ìœ„</strong><br/>
          ì§ˆë¬¸í•˜ê¸°/ë‹µë³€/íˆìŠ¤í† ë¦¬ + ì´ë©”ì¼/êµ¬ê¸€ ë¡œê·¸ì¸ + ë‹¨ì¼ ê²°ì œ(ì¹´ë“œ/í† ìŠ¤) ìš°ì„ .
        </div>
      </div>
      <div style="margin-top:12px" class="badge">Investor/Team Share â€¢ v1.0</div>
    </aside>

    <!-- MAIN AREA -->
    <main class="main">
      <!-- OVERVIEW / FLOW -->
      <div id="overview" class="page active">
        <section class="panel">
        <div class="section-title">
          <h3>â‘  ê°œìš” & í•µì‹¬ í”Œë¡œìš°</h3>
          <span class="pill">ëª©í‘œ: 2ì£¼ ë‚´ MVP ì‚¬ìš©ì í…ŒìŠ¤íŠ¸</span>
        </div>
        <div class="grid cols-3">
          <div class="panel">
            <h3>ì˜¨ë³´ë”©</h3>
            <div class="muted">ì´ë©”ì¼/êµ¬ê¸€ â†’ í•™ë…„Â·ì„±ì ëŒ€ ì„ íƒ â†’ 1íšŒ ì²´í—˜ ì§ˆë¬¸ ìœ ë„</div>
            <div class="divider"></div>
            <div class="skeleton" style="width:70%"></div>
            <div class="skeleton" style="width:50%;margin-top:8px"></div>
          </div>
          <div class="panel">
            <h3>í•µì‹¬ ì‚¬ìš©</h3>
            <div class="muted">ì§ˆë¬¸ ì—…ë¡œë“œ(í…ìŠ¤íŠ¸/ì‚¬ì§„) â†’ ë¹ ë¥¸/ì •í™• ëª¨ë“œ â†’ ë‹¨ê³„ë³„ í’€ì´ í™•ì¸</div>
            <div class="divider"></div>
            <div class="skeleton" style="width:85%"></div>
            <div class="skeleton" style="width:60%;margin-top:8px"></div>
          </div>
          <div class="panel">
            <h3>ì „í™˜</h3>
            <div class="muted">ìœ ì‚¬ë¬¸í•­Â·ì˜¤ê°œë… êµì • ì œì•ˆ â†’ ì‚¬ìš©ëŸ‰ ì„ê³„ ì‹œ í”„ë¦¬ë¯¸ì—„ ì•ˆë‚´ â†’ ê²°ì œ</div>
            <div class="divider"></div>
            <div class="skeleton" style="width:65%"></div>
            <div class="skeleton" style="width:40%;margin-top:8px"></div>
          </div>
        </div>
      </section>
      </div>

      <!-- AUTH -->
      <div id="auth" class="page">
        <section class="grid cols-2">
        <div class="panel">
          <h3>â‘¡ íšŒì›ê°€ì…</h3>
          <div class="grid cols-2">
            <div>
              <label class="muted">ì´ë©”ì¼</label>
              <input class="input" placeholder="you@example.com"/>
            </div>
            <div>
              <label class="muted">ë¹„ë°€ë²ˆí˜¸</label>
              <input class="input" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"/>
              <div class="muted" style="font-size:12px;margin-top:6px">ê°•ë„: â–‰â–‰â–‰â–Šâ–</div>
            </div>
          </div>
          <div class="grid cols-3" style="margin-top:8px">
            <input class="input" placeholder="ì´ë¦„"/>
            <select class="input"><option>í•™ë…„</option></select>
            <input class="input" placeholder="í•™êµ"/>
          </div>
          <div class="grid cols-2" style="margin-top:8px">
            <input class="input" placeholder="íœ´ëŒ€í° (SMS ì¸ì¦)"/>
            <select class="input"><option>í˜„ì¬ ì„±ì ëŒ€ (1~9)</option></select>
          </div>
          <div class="toolbar">
            <label><input type="checkbox"/> ì•½ê´€ ë™ì˜</label>
            <span class="kbd">ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€</span>
            <span class="kbd">ê°œì¸ì •ë³´</span>
            <span class="kbd">ë§ˆì¼€íŒ… ìˆ˜ì‹ (ì„ íƒ)</span>
          </div>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn primary">ì´ë©”ì¼ë¡œ ê°€ì…</button>
            <button class="btn"><span>G</span> êµ¬ê¸€ë¡œ ê³„ì†</button>
            <button class="btn">N ë„¤ì´ë²„</button>
            <button class="btn">K ì¹´ì¹´ì˜¤</button>
          </div>
        </div>
        <div class="panel">
          <h3>ë¡œê·¸ì¸ / ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •</h3>
          <input class="input" placeholder="ì´ë©”ì¼"/>
          <input class="input" placeholder="ë¹„ë°€ë²ˆí˜¸" style="margin-top:8px"/>
          <div style="display:flex;justify-content:space-between;align-items:center;margin:8px 0">
            <label class="muted"><input type="checkbox"/> ìë™ ë¡œê·¸ì¸</label>
            <a href="#" class="muted">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</a>
          </div>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn primary">ë¡œê·¸ì¸</button>
            <button class="btn ghost">íšŒì›ê°€ì…</button>
          </div>
          <div class="divider"></div>
          <div class="muted">ì¬ì„¤ì •: ì´ë©”ì¼ ì¸ì¦ â†’ ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ â†’ ì™„ë£Œ ì•ˆë‚´</div>
        </div>
      </section>
      </div>

      <!-- NEW QUESTION -->
      <div id="new-question" class="page">
        <div class="welcome-screen">
          <div class="welcome-message">
            ìˆ˜ëŠ¥, ì…ì‹œì— ê´€í•œ ëª¨ë“  ë¬¸ì œë¥¼ ì§ˆë¬¸í•´ ë³´ì„¸ìš”.
          </div>
          
          <div class="main-input-container">
            <div class="main-input-wrapper">
              <button class="action-btn" onclick="toggleDropdown()">
                <span>+</span>
              </button>
              <input 
                type="text" 
                class="main-input" 
                placeholder="ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”"
                id="mainQuestionInput"
              />
              <div class="input-actions">
                <button class="action-btn" onclick="startVoiceInput()" title="ìŒì„± ì…ë ¥">
                  <span>ğŸ¤</span>
                </button>
                <button class="action-btn primary" onclick="sendMainQuestion()" title="ì „ì†¡">
                  <span>â¤</span>
                </button>
        </div>
            </div>
            
            <!-- Dropdown Menu -->
            <div class="dropdown-menu" id="dropdownMenu">
              <div class="dropdown-item" onclick="uploadImage()">
                <div class="dropdown-item-icon">ğŸ“</div>
                <div class="dropdown-item-text">ì‚¬ì§„ ë° íŒŒì¼ ì¶”ê°€</div>
            </div>
              <div class="dropdown-item" onclick="addFromGoogleDrive()">
                <div class="dropdown-item-icon">ğŸ“</div>
                <div class="dropdown-item-text">Google Driveì—ì„œ ì¶”ê°€</div>
            </div>
              <div class="dropdown-item" onclick="startDeepResearch()">
                <div class="dropdown-item-icon">ğŸ”</div>
                <div class="dropdown-item-text">ì‹¬ì¸µ ë¦¬ì„œì¹˜</div>
          </div>
              <div class="dropdown-item premium-item" onclick="enablePerfectAnswerMode()">
                <div class="dropdown-item-icon">ğŸ¯</div>
                <div class="dropdown-item-text">ë¬´ì¡°ê±´ ì •ë‹µ ë‚´ëŠ” ëª¨ë“œ</div>
                <div class="dropdown-item-badge premium">ìœ ë£Œ</div>
              </div>
              <div class="dropdown-item premium-item" onclick="enableGraphImageMode()">
                <div class="dropdown-item-icon">ğŸ“Š</div>
                <div class="dropdown-item-text">ê·¸ë˜í”„, ì´ë¯¸ì§€ ì¶œë ¥ ëª¨ë“œ</div>
                <div class="dropdown-item-badge premium">ìœ ë£Œ</div>
              </div>
              <div class="dropdown-item" onclick="showMoreOptions()">
                <div class="dropdown-item-icon">â‹¯</div>
                <div class="dropdown-item-text">ë” ë³´ê¸°</div>
                <div class="dropdown-item-icon">â†’</div>
            </div>
              </div>
            </div>
          
          <!-- Subject Selection Tabs -->
          <div class="subject-tabs">
            <div class="subject-tab active" data-subject="math" onclick="selectSubject('math')">
              <span class="subject-icon">ğŸ“</span>
              <span class="subject-name">ìˆ˜í•™</span>
          </div>
            <div class="subject-tab" data-subject="korean" onclick="selectSubject('korean')">
              <span class="subject-icon">ğŸ“–</span>
              <span class="subject-name">êµ­ì–´</span>
        </div>
            <div class="subject-tab" data-subject="english" onclick="selectSubject('english')">
              <span class="subject-icon">ğŸ”¤</span>
              <span class="subject-name">ì˜ì–´</span>
            </div>
            <div class="subject-tab" data-subject="exploration" onclick="selectSubject('exploration')">
              <span class="subject-icon">ğŸ”¬</span>
              <span class="subject-name">íƒêµ¬</span>
            </div>
          </div>
          
          <!-- Subject Selection Notice -->
          <div class="subject-notice">
            â€» ê³¼ëª©ì„ ì„ íƒí•˜ë©´ ë” ì •í™•í•œ ë‹µê³¼ í’€ì´ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
          </div>
          
          <!-- Exploration Subject Submenu -->
          <div class="exploration-submenu" id="explorationSubmenu" style="display: none;">
            <div class="submenu-section">
              <div class="submenu-title">ê³¼í•™íƒêµ¬</div>
              <div class="submenu-items">
                <div class="submenu-item" onclick="selectExplorationSubject('physics1')">ë¬¼ë¦¬í•™ I</div>
                <div class="submenu-item" onclick="selectExplorationSubject('physics2')">ë¬¼ë¦¬í•™ II</div>
                <div class="submenu-item" onclick="selectExplorationSubject('chemistry1')">í™”í•™ I</div>
                <div class="submenu-item" onclick="selectExplorationSubject('chemistry2')">í™”í•™ II</div>
                <div class="submenu-item" onclick="selectExplorationSubject('biology1')">ìƒëª…ê³¼í•™ I</div>
                <div class="submenu-item" onclick="selectExplorationSubject('biology2')">ìƒëª…ê³¼í•™ II</div>
                <div class="submenu-item" onclick="selectExplorationSubject('earth1')">ì§€êµ¬ê³¼í•™ I</div>
                <div class="submenu-item" onclick="selectExplorationSubject('earth2')">ì§€êµ¬ê³¼í•™ II</div>
          </div>
        </div>
            <div class="submenu-section">
              <div class="submenu-title">ì‚¬íšŒíƒêµ¬</div>
              <div class="submenu-items">
                <div class="submenu-item" onclick="selectExplorationSubject('korean-history')">í•œêµ­ì‚¬</div>
                <div class="submenu-item" onclick="selectExplorationSubject('world-history')">ì„¸ê³„ì‚¬</div>
                <div class="submenu-item" onclick="selectExplorationSubject('geography')">ì§€ë¦¬</div>
                <div class="submenu-item" onclick="selectExplorationSubject('ethics')">ìœ¤ë¦¬ì™€ ì‚¬ìƒ</div>
                <div class="submenu-item" onclick="selectExplorationSubject('society-culture')">ì‚¬íšŒÂ·ë¬¸í™”</div>
                <div class="submenu-item" onclick="selectExplorationSubject('politics-law')">ì •ì¹˜ì™€ ë²•</div>
                <div class="submenu-item" onclick="selectExplorationSubject('economy')">ê²½ì œ</div>
                <div class="submenu-item" onclick="selectExplorationSubject('life-culture')">ìƒí™œê³¼ ìœ¤ë¦¬</div>
                <div class="submenu-item" onclick="selectExplorationSubject('world-geography')">ì„¸ê³„ì§€ë¦¬</div>
            </div>
            </div>
            </div>
            </div>
        
        <!-- Hidden Chat Container (shown after first question) -->
        <div class="chat-container" id="chatContainer" style="display: none;">
          <div class="chat-messages" id="chatMessages">
            <!-- Messages will be added here dynamically -->
          </div>
          <div class="chat-input-container">
            <div class="chat-input-form">
              <textarea 
                id="chatInput" 
                class="chat-input" 
                placeholder="ìˆ˜í•™ ë¬¸ì œë‚˜ ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”... (Shift+Enterë¡œ ì¤„ë°”ê¿ˆ)"
                rows="1"
              ></textarea>
              <button id="chatSendBtn" class="chat-send-btn" type="button">
                <span>â¤</span>
              </button>
                </div>
            
            <div class="toolbar" style="margin-top: 12px; justify-content: space-between;">
              <div style="display: flex; gap: 8px;">
                <span class="chip" onclick="uploadImage()">ğŸ“· ì´ë¯¸ì§€</span>
                <span class="chip" onclick="startVoiceInput()">ğŸ™ï¸ ìŒì„±</span>
                <select class="input" style="max-width: 180px; font-size: 12px;">
                  <option>ë¹ ë¥¸ í’€ì´</option>
                  <option>ì •í™•í•œ í’€ì´</option>
                  <option>ê°œë… ì„¤ëª…</option>
                </select>
                </div>
              <div class="muted" style="font-size: 12px;">
                ì§ˆë¬¸ 14/20 â€¢ OCR 8/20
              </div>
            </div>
            </div>
          </div>
        </div>

      <!-- CHAT HISTORY -->
      <div id="history" class="page">
        <section class="panel">
        <div class="section-title">
            <h3>ğŸ—‚ ì±„íŒ… íˆìŠ¤í† ë¦¬</h3>
          <div style="display:flex;gap:8px;align-items:center">
              <input class="input" placeholder="ì±„íŒ… ê²€ìƒ‰" style="max-width:240px" id="chatSearch"/>
              <select class="input" style="max-width:160px" id="subjectFilter">
                <option value="">ì „ì²´ ê³¼ëª©</option>
                <option value="math">ìˆ˜í•™</option>
                <option value="english">ì˜ì–´</option>
                <option value="physics">ë¬¼ë¦¬</option>
                <option value="chemistry">í™”í•™</option>
              </select>
              <select class="input" style="max-width:160px" id="statusFilter">
                <option value="">ì „ì²´ ìƒíƒœ</option>
                <option value="completed">ì™„ë£Œ</option>
                <option value="ongoing">ì§„í–‰ì¤‘</option>
                <option value="pending">ëŒ€ê¸°</option>
              </select>
          </div>
        </div>
          
          <!-- Chat List -->
          <div class="chat-list" id="chatList">
            <!-- Sample Chat Items -->
            <div class="chat-item" onclick="openChat('chat-001')">
              <div class="chat-item-header">
                <div class="chat-item-title">í•¨ìˆ˜ f(x)=xÂ²-3x+2ì˜ ê·¹ê°’</div>
                <div class="chat-item-time">2ë¶„ ì „</div>
              </div>
              <div class="chat-item-preview">f'(x) = 2x - 3 = 0 â†’ x = 1.5ì—ì„œ ê·¹ì†Ÿê°’...</div>
              <div class="chat-item-meta">
                <span class="badge">ìˆ˜í•™</span>
                <span class="badge">ì™„ë£Œ</span>
                <span class="chat-item-message-count">5ê°œ ë©”ì‹œì§€</span>
              </div>
            </div>

            <div class="chat-item" onclick="openChat('chat-002')">
              <div class="chat-item-header">
                <div class="chat-item-title">í™•ë¥ ë¶„í¬ì˜ ê¸°ëŒ“ê°’ ê³„ì‚°</div>
                <div class="chat-item-time">1ì‹œê°„ ì „</div>
              </div>
              <div class="chat-item-preview">E[X] = Î£ xÂ·P(X=x) ê³µì‹ì„ ì‚¬ìš©í•˜ì—¬...</div>
              <div class="chat-item-meta">
                <span class="badge">ìˆ˜í•™</span>
                <span class="badge">ì™„ë£Œ</span>
                <span class="chat-item-message-count">8ê°œ ë©”ì‹œì§€</span>
              </div>
            </div>

            <div class="chat-item" onclick="openChat('chat-003')">
              <div class="chat-item-header">
                <div class="chat-item-title">ë¬¸ì¥ ì‚½ì… ìœ í˜• í•´ì„¤</div>
                <div class="chat-item-time">3ì‹œê°„ ì „</div>
              </div>
              <div class="chat-item-preview">ë¬¸ë§¥ìƒ ê°€ì¥ ì ì ˆí•œ ë¬¸ì¥ì„ ì°¾ëŠ” ë¬¸ì œ...</div>
              <div class="chat-item-meta">
                <span class="badge">ì˜ì–´</span>
                <span class="badge">ì§„í–‰ì¤‘</span>
                <span class="chat-item-message-count">3ê°œ ë©”ì‹œì§€</span>
              </div>
            </div>

            <div class="chat-item" onclick="openChat('chat-004')">
              <div class="chat-item-header">
                <div class="chat-item-title">ì „ê¸°íšŒë¡œ ì˜´ì˜ ë²•ì¹™</div>
                <div class="chat-item-time">1ì¼ ì „</div>
              </div>
              <div class="chat-item-preview">V = I Ã— R ê³µì‹ì„ ì ìš©í•˜ì—¬ ì „ì••ì„ êµ¬í•˜ëŠ”...</div>
              <div class="chat-item-meta">
                <span class="badge">ë¬¼ë¦¬</span>
                <span class="badge">ì™„ë£Œ</span>
                <span class="chat-item-message-count">6ê°œ ë©”ì‹œì§€</span>
              </div>
            </div>

            <div class="chat-item" onclick="openChat('chat-005')">
              <div class="chat-item-header">
                <div class="chat-item-title">ë¯¸ì ë¶„ ê¸°ë³¸ì •ë¦¬ ì¦ëª…</div>
                <div class="chat-item-time">2ì¼ ì „</div>
              </div>
              <div class="chat-item-preview">F'(x) = f(x)ì¸ í•¨ìˆ˜ F(x)ë¥¼ ì°¾ëŠ” ê³¼ì •...</div>
              <div class="chat-item-meta">
                <span class="badge">ìˆ˜í•™</span>
                <span class="badge">ì™„ë£Œ</span>
                <span class="chat-item-message-count">12ê°œ ë©”ì‹œì§€</span>
              </div>
            </div>
          </div>

          <!-- Empty State -->
          <div class="empty-state" id="emptyState" style="display: none;">
            <div style="text-align: center; padding: 40px; color: var(--md-on-surface-variant);">
              <div style="font-size: 48px; margin-bottom: 16px;">ğŸ’¬</div>
              <h3>ì•„ì§ ì±„íŒ…ì´ ì—†ìŠµë‹ˆë‹¤</h3>
              <p>ìƒˆ ì§ˆë¬¸í•˜ê¸°ì—ì„œ ì²« ë²ˆì§¸ ì§ˆë¬¸ì„ ì‹œì‘í•´ë³´ì„¸ìš”!</p>
              <button class="btn primary" onclick="goToPage('new-question')" style="margin-top: 16px;">
                ìƒˆ ì§ˆë¬¸í•˜ê¸°
              </button>
            </div>
        </div>
      </section>
      </div>

      <!-- PRICING / BILLING -->
      <div id="pricing" class="page">
        <section class="panel">
        <div class="section-title">
          <h3>â‘¥ ê²°ì œ/êµ¬ë… ê´€ë¦¬</h3>
          <div class="muted">Free 7ì¼Â·ì§ˆë¬¸ 20íšŒ ì²´í—˜ â†’ Basic / Pro / Pro+</div>
        </div>
        <div class="pricing">
          <div class="plan">
            <div class="badge">Free</div>
            <div class="price">â‚©0</div>
            <div class="muted">ì§ˆë¬¸ 20 / OCR 20, ê°œë…ë¶</div>
            <button class="btn small">ì‹œì‘í•˜ê¸°</button>
          </div>
          <div class="plan pop">
            <div class="badge">Basic</div>
            <div class="price">â‚©9,900<span class="muted" style="font-size:12px">/ì›”</span></div>
            <div class="muted">ì§ˆë¬¸ 150 / OCR 100</div>
            <button class="btn primary">êµ¬ë…</button>
          </div>
          <div class="plan">
            <div class="badge">Pro</div>
            <div class="price">â‚©19,900<span class="muted" style="font-size:12px">/ì›”</span></div>
            <div class="muted">ì§ˆë¬¸ 300 / OCR 300 â€¢ ìš°ì„  ì²˜ë¦¬</div>
            <button class="btn small">êµ¬ë…</button>
          </div>
          <div class="plan">
            <div class="badge">Pro+</div>
            <div class="price">â‚©29,900<span class="muted" style="font-size:12px">/ì›”</span></div>
            <div class="muted">ì—¬ëŸ¬ í’€ì´, ëŒ€ìš©ëŸ‰ PDF</div>
            <button class="btn small">êµ¬ë…</button>
          </div>
        </div>
        <div class="divider"></div>
        <div class="grid cols-2">
          <div class="panel">
            <h3>ê²°ì œ ìˆ˜ë‹¨</h3>
            <div class="muted">ì¹´ë“œ/ê³„ì¢Œì´ì²´/íœ´ëŒ€í°/í† ìŠ¤Â·ì¹´ì¹´ì˜¤Â·ë„¤ì´ë²„í˜ì´</div>
            <div class="notice" style="margin-top:8px"><div>â„¹ï¸</div><div>ì •ê¸°ê²°ì œ, ì—°ê°„ -20% â€¢ í™˜ë¶ˆ: 7ì¼ ì´ë‚´ ë¯¸ì‚¬ìš© ì „ì•¡</div></div>
          </div>
          <div class="panel">
            <h3>êµ¬ë… ê´€ë¦¬</h3>
            <div class="muted">í˜„ì¬ ìƒíƒœ, ë‹¤ìŒ ê²°ì œì¼, ë³€ê²½/í•´ì§€, ì˜ìˆ˜ì¦</div>
            <div style="margin-top:8px;display:flex;gap:8px">
              <button class="btn small">ìƒì„¸ ë³´ê¸°</button>
              <button class="btn small">ì˜ìˆ˜ì¦ ë°œê¸‰</button>
            </div>
          </div>
        </div>
      </section>
      </div>

      <!-- SETTINGS -->
      <div id="settings" class="page">
        <section class="grid cols-3">
        <div class="panel">
          <h3>â‘¦ í”„ë¡œí•„</h3>
          <div style="display:flex;gap:10px;align-items:center">
            <div class="avatar"></div>
            <div>
              <div><strong>í™ê¸¸ë™</strong></div>
              <div class="muted">2í•™ë…„ â€¢ SNê³ </div>
            </div>
          </div>
          <div class="divider"></div>
          <input class="input" placeholder="ëª©í‘œ ëŒ€í•™/í•™ê³¼"/>
          <button class="btn small" style="margin-top:8px">ì €ì¥</button>
        </div>
        <div class="panel">
          <h3>ì•Œë¦¼</h3>
          <label><input type="checkbox" checked/> ë‹µë³€ ì™„ë£Œ</label><br/>
          <label><input type="checkbox"/> ë³µìŠµ ë¦¬ë§ˆì¸ë”</label><br/>
          <label><input type="checkbox"/> ëª©í‘œ ë‹¬ì„±</label>
        </div>
        <div class="panel">
          <h3>ë³´ì•ˆ</h3>
          <button class="btn small">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
          <button class="btn small">2ë‹¨ê³„ ì¸ì¦</button>
          <div class="muted" style="margin-top:6px">ë¡œê·¸ì¸ íˆìŠ¤í† ë¦¬, ì†Œì…œ ê³„ì • ì—°ê²°, ê³„ì • íƒˆí‡´</div>
        </div>
      </section>
      </div>

      <!-- SUPPORT -->
      <div id="support" class="page">
        <section class="grid cols-2">
        <div class="panel">
          <h3>â‘§ FAQ</h3>
          <div class="row" style="grid-template-columns:1fr 100px">
            <div>ì§ˆë¬¸ì€ ì–´ë–»ê²Œ ì˜¬ë¦¬ë‚˜ìš”?</div>
            <button class="btn small">ë³´ê¸°</button>
          </div>
          <div class="row" style="grid-template-columns:1fr 100px">
            <div>í™˜ë¶ˆ ê¸°ì¤€ì€?</div>
            <button class="btn small">ë³´ê¸°</button>
          </div>
        </div>
        <div class="panel">
          <h3>1:1 ë¬¸ì˜</h3>
          <input class="input" placeholder="ì œëª©"/>
          <textarea class="input" placeholder="ë¬¸ì˜ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
          <div class="toolbar"><span class="chip">ğŸ“ íŒŒì¼ ì²¨ë¶€</span></div>
          <button class="btn primary">ë³´ë‚´ê¸°</button>
        </div>
      </section>
      </div>

    </main>
  </div>

  <script>
    // SPA Navigation System
    class SPANavigator {
      constructor() {
        this.currentPage = 'overview';
        this.init();
      }

      init() {
        // ì‚¬ì´ë“œë°” ë§í¬ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        document.querySelectorAll('.side-links a').forEach(link => {
          link.addEventListener('click', (e) => {
            e.preventDefault();
            const pageId = link.getAttribute('href').substring(1);
            this.navigateTo(pageId);
          });
        });

        // URL í•´ì‹œ ë³€ê²½ ê°ì§€
        window.addEventListener('hashchange', () => {
          const pageId = window.location.hash.substring(1) || 'overview';
          this.navigateTo(pageId);
        });

        // ì´ˆê¸° í˜ì´ì§€ ë¡œë“œ
        const pageId = window.location.hash.substring(1) || 'overview';
        this.navigateTo(pageId);
      }

      navigateTo(pageId) {
        // ìœ íš¨í•œ í˜ì´ì§€ IDì¸ì§€ í™•ì¸
        const validPages = ['overview', 'auth', 'new-question', 'history', 'pricing', 'settings', 'support'];
        if (!validPages.includes(pageId)) {
          pageId = 'overview';
        }

        // í˜„ì¬ í˜ì´ì§€ ìˆ¨ê¸°ê¸°
        document.querySelectorAll('.page').forEach(page => {
          page.classList.remove('active');
        });

        // ì„ íƒëœ í˜ì´ì§€ ë³´ì´ê¸°
        const targetPage = document.getElementById(pageId);
        if (targetPage) {
          targetPage.classList.add('active');
        }

        // ì‚¬ì´ë“œë°” í™œì„± ìƒíƒœ ì—…ë°ì´íŠ¸
        document.querySelectorAll('.side-links a').forEach(link => {
          link.classList.remove('active');
        });

        const activeLink = document.querySelector(`.side-links a[href="#${pageId}"]`);
        if (activeLink) {
          activeLink.classList.add('active');
        }

        // URL í•´ì‹œ ì—…ë°ì´íŠ¸
        if (window.location.hash !== `#${pageId}`) {
          window.history.pushState(null, null, `#${pageId}`);
        }

        this.currentPage = pageId;

        // í˜ì´ì§€ ì „í™˜ í›„ ìŠ¤í¬ë¡¤ì„ ë§¨ ìœ„ë¡œ
        window.scrollTo(0, 0);
      }

      // í”„ë¡œê·¸ë˜ë° ë°©ì‹ìœ¼ë¡œ í˜ì´ì§€ ì´ë™
      goToPage(pageId) {
        this.navigateTo(pageId);
      }

      // í˜„ì¬ í˜ì´ì§€ ID ë°˜í™˜
      getCurrentPage() {
        return this.currentPage;
      }
    }

    // Chat System
    class ChatSystem {
      constructor() {
        this.messages = [];
        this.isTyping = false;
        this.init();
      }

      init() {
        const chatInput = document.getElementById('chatInput');
        const chatSendBtn = document.getElementById('chatSendBtn');
        const chatMessages = document.getElementById('chatMessages');

        if (chatInput && chatSendBtn && chatMessages) {
          // ì „ì†¡ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
          chatSendBtn.addEventListener('click', () => this.sendMessage());

          // Enter í‚¤ ì´ë²¤íŠ¸ (Shift+EnterëŠ” ì¤„ë°”ê¿ˆ)
          chatInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
              e.preventDefault();
              this.sendMessage();
            }
          });

          // ì…ë ¥ì°½ ìë™ ë†’ì´ ì¡°ì ˆ
          chatInput.addEventListener('input', () => {
            this.autoResizeTextarea(chatInput);
          });
        }
      }

      autoResizeTextarea(textarea) {
        textarea.style.height = 'auto';
        textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
      }

      sendMessage() {
        const chatInput = document.getElementById('chatInput');
        const message = chatInput.value.trim();

        if (!message) return;

        // ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
        this.addMessage('user', message);
        
        // ì…ë ¥ì°½ ì´ˆê¸°í™”
        chatInput.value = '';
        chatInput.style.height = 'auto';

        // AI ì‘ë‹µ ì‹œë®¬ë ˆì´ì…˜
        this.simulateAIResponse(message);
      }

      addMessage(sender, content, timestamp = null) {
        const chatMessages = document.getElementById('chatMessages');
        if (!chatMessages) return;

        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${sender}`;

        const avatar = document.createElement('div');
        avatar.className = 'message-avatar';
        avatar.textContent = sender === 'user' ? 'ë‚˜' : 'SN';

        const messageContent = document.createElement('div');
        messageContent.className = 'message-content';
        messageContent.innerHTML = content;

        const messageTime = document.createElement('div');
        messageTime.className = 'message-time';
        messageTime.textContent = timestamp || this.getCurrentTime();

        messageContent.appendChild(messageTime);
        messageDiv.appendChild(avatar);
        messageDiv.appendChild(messageContent);
        chatMessages.appendChild(messageDiv);

        // ìŠ¤í¬ë¡¤ì„ ë§¨ ì•„ë˜ë¡œ
        chatMessages.scrollTop = chatMessages.scrollHeight;

        this.messages.push({ sender, content, timestamp: messageTime.textContent });
      }

      simulateAIResponse(userMessage) {
        this.showTypingIndicator();

        // AI ì‘ë‹µ ì‹œë®¬ë ˆì´ì…˜ (ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ)
        setTimeout(() => {
          this.hideTypingIndicator();
          const response = this.generateAIResponse(userMessage);
          this.addMessage('assistant', response);
        }, 1500 + Math.random() * 1000);
      }

      generateAIResponse(userMessage) {
        // ê°„ë‹¨í•œ ì‘ë‹µ ìƒì„± (ì‹¤ì œë¡œëŠ” AI API í˜¸ì¶œ)
        const responses = [
          `"${userMessage}"ì— ëŒ€í•œ ë‹µë³€ì„ ì¤€ë¹„í•˜ê³  ìˆìŠµë‹ˆë‹¤.`,
          `ì¢‹ì€ ì§ˆë¬¸ì´ë„¤ìš”! ë‹¨ê³„ë³„ë¡œ ì„¤ëª…í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.`,
          `ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ ì ‘ê·¼í•´ë³´ê² ìŠµë‹ˆë‹¤.`,
          `ìˆ˜í•™ì  ê°œë…ì„ ë°”íƒ•ìœ¼ë¡œ ìì„¸íˆ ì„¤ëª…ë“œë¦¬ê² ìŠµë‹ˆë‹¤.`
        ];

        const randomResponse = responses[Math.floor(Math.random() * responses.length)];
        
        return `
          <div class="step-indicator">
            <span>ğŸ¤”</span>
            <span>ì§ˆë¬¸ ë¶„ì„ ì¤‘...</span>
          </div>
          ${randomResponse}
          
          <div class="step-indicator">
            <span>ğŸ“</span>
            <span>ë‹¨ê³„ë³„ í’€ì´</span>
          </div>
          <div class="math-block">
            // ì—¬ê¸°ì— ì‹¤ì œ ìˆ˜í•™ í’€ì´ê°€ ë“¤ì–´ê°‘ë‹ˆë‹¤
            // ì‹¤ì œ êµ¬í˜„ ì‹œ AI APIì—ì„œ ë°›ì€ ì‘ë‹µì„ í‘œì‹œ
          </div>
          
          <div class="step-indicator">
            <span>ğŸ’¡</span>
            <span>ì¶”ê°€ í•™ìŠµ ì œì•ˆ</span>
          </div>
          ê´€ë ¨ëœ ê°œë…ì´ë‚˜ ìœ ì‚¬í•œ ë¬¸ì œë¥¼ ë” ì—°ìŠµí•´ë³´ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.
        `;
      }

      showTypingIndicator() {
        const chatMessages = document.getElementById('chatMessages');
        if (!chatMessages) return;

        const typingDiv = document.createElement('div');
        typingDiv.className = 'message assistant typing-message';
        typingDiv.innerHTML = `
          <div class="message-avatar">SN</div>
          <div class="message-content">
            <div class="typing-indicator">
              <span>SNarGPTê°€ ë‹µë³€ì„ ì¤€ë¹„í•˜ê³  ìˆìŠµë‹ˆë‹¤</span>
              <div class="typing-dots">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
              </div>
            </div>
          </div>
        `;

        chatMessages.appendChild(typingDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
        this.isTyping = true;
      }

      hideTypingIndicator() {
        const typingMessage = document.querySelector('.typing-message');
        if (typingMessage) {
          typingMessage.remove();
        }
        this.isTyping = false;
      }

      getCurrentTime() {
        const now = new Date();
        return now.toLocaleTimeString('ko-KR', { 
          hour: '2-digit', 
          minute: '2-digit' 
        });
      }
    }

    // Chat History System
    class ChatHistorySystem {
      constructor() {
        this.chats = this.loadChats();
        this.init();
      }

      init() {
        this.setupSearchAndFilter();
        this.renderChatList();
      }

      loadChats() {
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì±„íŒ… ëª©ë¡ ë¡œë“œ (ì‹¤ì œë¡œëŠ” ì„œë²„ì—ì„œ)
        const saved = localStorage.getItem('snargpt_chats');
        if (saved) {
          return JSON.parse(saved);
        }
        
        // ìƒ˜í”Œ ë°ì´í„°
        return [
          {
            id: 'chat-001',
            title: 'í•¨ìˆ˜ f(x)=xÂ²-3x+2ì˜ ê·¹ê°’',
            preview: 'f\'(x) = 2x - 3 = 0 â†’ x = 1.5ì—ì„œ ê·¹ì†Ÿê°’...',
            subject: 'math',
            status: 'completed',
            messageCount: 5,
            lastMessageTime: new Date(Date.now() - 2 * 60 * 1000), // 2ë¶„ ì „
            messages: []
          },
          {
            id: 'chat-002',
            title: 'í™•ë¥ ë¶„í¬ì˜ ê¸°ëŒ“ê°’ ê³„ì‚°',
            preview: 'E[X] = Î£ xÂ·P(X=x) ê³µì‹ì„ ì‚¬ìš©í•˜ì—¬...',
            subject: 'math',
            status: 'completed',
            messageCount: 8,
            lastMessageTime: new Date(Date.now() - 60 * 60 * 1000), // 1ì‹œê°„ ì „
            messages: []
          },
          {
            id: 'chat-003',
            title: 'ë¬¸ì¥ ì‚½ì… ìœ í˜• í•´ì„¤',
            preview: 'ë¬¸ë§¥ìƒ ê°€ì¥ ì ì ˆí•œ ë¬¸ì¥ì„ ì°¾ëŠ” ë¬¸ì œ...',
            subject: 'english',
            status: 'ongoing',
            messageCount: 3,
            lastMessageTime: new Date(Date.now() - 3 * 60 * 60 * 1000), // 3ì‹œê°„ ì „
            messages: []
          },
          {
            id: 'chat-004',
            title: 'ì „ê¸°íšŒë¡œ ì˜´ì˜ ë²•ì¹™',
            preview: 'V = I Ã— R ê³µì‹ì„ ì ìš©í•˜ì—¬ ì „ì••ì„ êµ¬í•˜ëŠ”...',
            subject: 'physics',
            status: 'completed',
            messageCount: 6,
            lastMessageTime: new Date(Date.now() - 24 * 60 * 60 * 1000), // 1ì¼ ì „
            messages: []
          },
          {
            id: 'chat-005',
            title: 'ë¯¸ì ë¶„ ê¸°ë³¸ì •ë¦¬ ì¦ëª…',
            preview: 'F\'(x) = f(x)ì¸ í•¨ìˆ˜ F(x)ë¥¼ ì°¾ëŠ” ê³¼ì •...',
            subject: 'math',
            status: 'completed',
            messageCount: 12,
            lastMessageTime: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000), // 2ì¼ ì „
            messages: []
          }
        ];
      }

      saveChats() {
        localStorage.setItem('snargpt_chats', JSON.stringify(this.chats));
      }

      setupSearchAndFilter() {
        const searchInput = document.getElementById('chatSearch');
        const subjectFilter = document.getElementById('subjectFilter');
        const statusFilter = document.getElementById('statusFilter');

        if (searchInput) {
          searchInput.addEventListener('input', () => this.filterChats());
        }
        if (subjectFilter) {
          subjectFilter.addEventListener('change', () => this.filterChats());
        }
        if (statusFilter) {
          statusFilter.addEventListener('change', () => this.filterChats());
        }
      }

      filterChats() {
        const searchTerm = document.getElementById('chatSearch')?.value.toLowerCase() || '';
        const subjectFilter = document.getElementById('subjectFilter')?.value || '';
        const statusFilter = document.getElementById('statusFilter')?.value || '';

        const filteredChats = this.chats.filter(chat => {
          const matchesSearch = chat.title.toLowerCase().includes(searchTerm) || 
                               chat.preview.toLowerCase().includes(searchTerm);
          const matchesSubject = !subjectFilter || chat.subject === subjectFilter;
          const matchesStatus = !statusFilter || chat.status === statusFilter;
          
          return matchesSearch && matchesSubject && matchesStatus;
        });

        this.renderChatList(filteredChats);
      }

      renderChatList(chatsToRender = null) {
        const chatList = document.getElementById('chatList');
        const emptyState = document.getElementById('emptyState');
        
        if (!chatList) return;

        const chats = chatsToRender || this.chats;

        if (chats.length === 0) {
          chatList.style.display = 'none';
          if (emptyState) emptyState.style.display = 'block';
          return;
        }

        chatList.style.display = 'block';
        if (emptyState) emptyState.style.display = 'none';

        chatList.innerHTML = chats.map(chat => `
          <div class="chat-item" onclick="openChat('${chat.id}')">
            <div class="chat-item-header">
              <div class="chat-item-title">${chat.title}</div>
              <div class="chat-item-time">${this.formatTime(chat.lastMessageTime)}</div>
            </div>
            <div class="chat-item-preview">${chat.preview}</div>
            <div class="chat-item-meta">
              <span class="badge">${this.getSubjectName(chat.subject)}</span>
              <span class="badge">${this.getStatusName(chat.status)}</span>
              <span class="chat-item-message-count">${chat.messageCount}ê°œ ë©”ì‹œì§€</span>
            </div>
          </div>
        `).join('');
      }

      formatTime(date) {
        const now = new Date();
        const diff = now - date;
        const minutes = Math.floor(diff / (1000 * 60));
        const hours = Math.floor(diff / (1000 * 60 * 60));
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));

        if (minutes < 1) return 'ë°©ê¸ˆ ì „';
        if (minutes < 60) return `${minutes}ë¶„ ì „`;
        if (hours < 24) return `${hours}ì‹œê°„ ì „`;
        return `${days}ì¼ ì „`;
      }

      getSubjectName(subject) {
        const subjects = {
          'math': 'ìˆ˜í•™',
          'english': 'ì˜ì–´',
          'physics': 'ë¬¼ë¦¬',
          'chemistry': 'í™”í•™'
        };
        return subjects[subject] || subject;
      }

      getStatusName(status) {
        const statuses = {
          'completed': 'ì™„ë£Œ',
          'ongoing': 'ì§„í–‰ì¤‘',
          'pending': 'ëŒ€ê¸°'
        };
        return statuses[status] || status;
      }

      addNewChat(title, preview, subject = 'math') {
        const newChat = {
          id: `chat-${Date.now()}`,
          title,
          preview,
          subject,
          status: 'ongoing',
          messageCount: 0,
          lastMessageTime: new Date(),
          messages: []
        };

        this.chats.unshift(newChat);
        this.saveChats();
        this.renderChatList();
        
        return newChat.id;
      }

      updateChat(chatId, updates) {
        const chatIndex = this.chats.findIndex(chat => chat.id === chatId);
        if (chatIndex !== -1) {
          this.chats[chatIndex] = { ...this.chats[chatIndex], ...updates };
          this.saveChats();
          this.renderChatList();
        }
      }
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ SPA ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', () => {
      window.spaNavigator = new SPANavigator();
      window.chatSystem = new ChatSystem();
      window.chatHistorySystem = new ChatHistorySystem();
      
      // ê°œë°œì ë„êµ¬ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì „ì—­ í•¨ìˆ˜ ì œê³µ
      window.goToPage = (pageId) => window.spaNavigator.goToPage(pageId);
      
      console.log('SNarGPT SPAê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
      console.log('ì‚¬ìš© ê°€ëŠ¥í•œ í˜ì´ì§€:', ['overview', 'auth', 'new-question', 'history', 'pricing', 'settings', 'support']);
      console.log('í˜ì´ì§€ ì´ë™ ì˜ˆì‹œ: goToPage("new-question")');
    });

    // ì¶”ê°€ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
    function showNotification(message, type = 'info') {
      // ê°„ë‹¨í•œ ì•Œë¦¼ ì‹œìŠ¤í…œ (í–¥í›„ í™•ì¥ ê°€ëŠ¥)
      const colors = {
        'info': '#2196F3',
        'success': '#4CAF50',
        'warning': '#FF9800',
        'error': '#F44336'
      };
      
      console.log(`[${type.toUpperCase()}] ${message}`);
      
      // ì‹¤ì œë¡œëŠ” í† ìŠ¤íŠ¸ ì•Œë¦¼ì„ í‘œì‹œ
      // showToast(message, colors[type] || colors.info);
    }

    function toggleSidebar() {
      // ëª¨ë°”ì¼ì—ì„œ ì‚¬ì´ë“œë°” í† ê¸€ (í–¥í›„ êµ¬í˜„)
      console.log('ì‚¬ì´ë“œë°” í† ê¸€');
    }

    function uploadImage() {
      // ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ (í–¥í›„ êµ¬í˜„)
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = 'image/*';
      input.onchange = (e) => {
        const file = e.target.files[0];
        if (file) {
          showNotification('ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ì€ ê³§ ì¶”ê°€ë  ì˜ˆì •ì…ë‹ˆë‹¤.', 'info');
        }
      };
      input.click();
    }

    function startVoiceInput() {
      // ìŒì„± ì…ë ¥ ê¸°ëŠ¥ (í–¥í›„ êµ¬í˜„)
      showNotification('ìŒì„± ì…ë ¥ ê¸°ëŠ¥ì€ ê³§ ì¶”ê°€ë  ì˜ˆì •ì…ë‹ˆë‹¤.', 'info');
    }

    function openChat(chatId) {
      // ì±„íŒ… ì—´ê¸° ê¸°ëŠ¥ (í–¥í›„ êµ¬í˜„)
      showNotification(`ì±„íŒ… "${chatId}"ì„ ì—´ê³  ìˆìŠµë‹ˆë‹¤...`, 'info');
      // ì‹¤ì œë¡œëŠ” í•´ë‹¹ ì±„íŒ…ì˜ ë©”ì‹œì§€ë“¤ì„ ë¡œë“œí•˜ê³  ì±„íŒ… í™”ë©´ìœ¼ë¡œ ì´ë™
      // goToPage('chat-detail', { chatId: chatId });
    }

    // New Question Page Functions
    let selectedSubject = 'math';
    let selectedExplorationSubject = null;

    function toggleDropdown() {
      const dropdown = document.getElementById('dropdownMenu');
      if (dropdown) {
        dropdown.classList.toggle('show');
      }
    }

    function selectSubject(subject) {
      // Update active tab
      document.querySelectorAll('.subject-tab').forEach(tab => {
        tab.classList.remove('active');
      });
      document.querySelector(`[data-subject="${subject}"]`).classList.add('active');
      
      selectedSubject = subject;
      
      // Show/hide exploration submenu
      const explorationSubmenu = document.getElementById('explorationSubmenu');
      if (subject === 'exploration') {
        explorationSubmenu.style.display = 'block';
      } else {
        explorationSubmenu.style.display = 'none';
        selectedExplorationSubject = null;
      }
    }

    function selectExplorationSubject(subject) {
      // Update selected exploration subject
      document.querySelectorAll('.submenu-item').forEach(item => {
        item.classList.remove('selected');
      });
      event.target.classList.add('selected');
      
      selectedExplorationSubject = subject;
      
      // Update main subject tab to show selected exploration subject
      const explorationTab = document.querySelector('[data-subject="exploration"]');
      const subjectNames = {
        'physics1': 'ë¬¼ë¦¬í•™ I',
        'physics2': 'ë¬¼ë¦¬í•™ II',
        'chemistry1': 'í™”í•™ I',
        'chemistry2': 'í™”í•™ II',
        'biology1': 'ìƒëª…ê³¼í•™ I',
        'biology2': 'ìƒëª…ê³¼í•™ II',
        'earth1': 'ì§€êµ¬ê³¼í•™ I',
        'earth2': 'ì§€êµ¬ê³¼í•™ II',
        'korean-history': 'í•œêµ­ì‚¬',
        'world-history': 'ì„¸ê³„ì‚¬',
        'geography': 'ì§€ë¦¬',
        'ethics': 'ìœ¤ë¦¬ì™€ ì‚¬ìƒ',
        'society-culture': 'ì‚¬íšŒÂ·ë¬¸í™”',
        'politics-law': 'ì •ì¹˜ì™€ ë²•',
        'economy': 'ê²½ì œ',
        'life-culture': 'ìƒí™œê³¼ ìœ¤ë¦¬',
        'world-geography': 'ì„¸ê³„ì§€ë¦¬'
      };
      
      const subjectName = subjectNames[subject] || subject;
      explorationTab.querySelector('.subject-name').textContent = subjectName;
    }

    function sendMainQuestion() {
      const input = document.getElementById('mainQuestionInput');
      const question = input.value.trim();
      
      if (!question) return;
      
      // Get selected subject info
      const subjectInfo = getSelectedSubjectInfo();
      
      // Hide welcome screen and show chat container
      const welcomeScreen = document.querySelector('.welcome-screen');
      const chatContainer = document.getElementById('chatContainer');
      
      if (welcomeScreen && chatContainer) {
        welcomeScreen.style.display = 'none';
        chatContainer.style.display = 'flex';
        
        // Initialize chat with the question
        if (window.chatSystem) {
          window.chatSystem.addMessage('user', question);
          window.chatSystem.simulateAIResponse(question);
        }
        
        // Add to chat history with subject info
        if (window.chatHistorySystem) {
          const preview = question.length > 50 ? question.substring(0, 50) + '...' : question;
          window.chatHistorySystem.addNewChat(question, preview, subjectInfo.code);
        }
      }
      
      input.value = '';
    }

    function getSelectedSubjectInfo() {
      if (selectedSubject === 'exploration' && selectedExplorationSubject) {
        return {
          code: selectedExplorationSubject,
          name: getExplorationSubjectName(selectedExplorationSubject),
          category: 'exploration'
        };
      } else {
        const subjectNames = {
          'math': 'ìˆ˜í•™',
          'korean': 'êµ­ì–´',
          'english': 'ì˜ì–´',
          'exploration': 'íƒêµ¬'
        };
        return {
          code: selectedSubject,
          name: subjectNames[selectedSubject] || selectedSubject,
          category: selectedSubject
        };
      }
    }

    function getExplorationSubjectName(code) {
      const subjectNames = {
        'physics1': 'ë¬¼ë¦¬í•™ I',
        'physics2': 'ë¬¼ë¦¬í•™ II',
        'chemistry1': 'í™”í•™ I',
        'chemistry2': 'í™”í•™ II',
        'biology1': 'ìƒëª…ê³¼í•™ I',
        'biology2': 'ìƒëª…ê³¼í•™ II',
        'earth1': 'ì§€êµ¬ê³¼í•™ I',
        'earth2': 'ì§€êµ¬ê³¼í•™ II',
        'korean-history': 'í•œêµ­ì‚¬',
        'world-history': 'ì„¸ê³„ì‚¬',
        'geography': 'ì§€ë¦¬',
        'ethics': 'ìœ¤ë¦¬ì™€ ì‚¬ìƒ',
        'society-culture': 'ì‚¬íšŒÂ·ë¬¸í™”',
        'politics-law': 'ì •ì¹˜ì™€ ë²•',
        'economy': 'ê²½ì œ',
        'life-culture': 'ìƒí™œê³¼ ìœ¤ë¦¬',
        'world-geography': 'ì„¸ê³„ì§€ë¦¬'
      };
      return subjectNames[code] || code;
    }


    // Dropdown menu functions
    function addFromGoogleDrive() {
      showNotification('Google Drive ì—°ë™ ê¸°ëŠ¥ì€ ê³§ ì¶”ê°€ë  ì˜ˆì •ì…ë‹ˆë‹¤.', 'info');
      toggleDropdown();
    }

    function startDeepResearch() {
      showNotification('ì‹¬ì¸µ ë¦¬ì„œì¹˜ ëª¨ë“œê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
      toggleDropdown();
    }

    function enablePerfectAnswerMode() {
      showNotification('ë¬´ì¡°ê±´ ì •ë‹µ ë‚´ëŠ” ëª¨ë“œëŠ” ìœ ë£Œ ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì—…ê·¸ë ˆì´ë“œê°€ í•„ìš”í•©ë‹ˆë‹¤.', 'warning');
      toggleDropdown();
      // ì‹¤ì œë¡œëŠ” ê²°ì œ í˜ì´ì§€ë¡œ ì´ë™
      // goToPage('pricing');
    }

    function enableGraphImageMode() {
      showNotification('ê·¸ë˜í”„, ì´ë¯¸ì§€ ì¶œë ¥ ëª¨ë“œëŠ” ìœ ë£Œ ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì—…ê·¸ë ˆì´ë“œê°€ í•„ìš”í•©ë‹ˆë‹¤.', 'warning');
      toggleDropdown();
      // ì‹¤ì œë¡œëŠ” ê²°ì œ í˜ì´ì§€ë¡œ ì´ë™
      // goToPage('pricing');
    }

    function showMoreOptions() {
      showNotification('ì¶”ê°€ ì˜µì…˜ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...', 'info');
      toggleDropdown();
    }

    // Close dropdown when clicking outside
    document.addEventListener('click', (e) => {
      const dropdown = document.getElementById('dropdownMenu');
      const toggleBtn = document.querySelector('.action-btn');
      
      if (dropdown && !dropdown.contains(e.target) && !toggleBtn.contains(e.target)) {
        dropdown.classList.remove('show');
      }
    });

    // Handle Enter key in main input
    document.addEventListener('DOMContentLoaded', () => {
      const mainInput = document.getElementById('mainQuestionInput');
      if (mainInput) {
        mainInput.addEventListener('keydown', (e) => {
          if (e.key === 'Enter') {
            e.preventDefault();
            sendMainQuestion();
          }
        });
      }
    });
  </script>
</body>
</html>
